import base64
exec(base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0NCmZyb20gZGlzY29yZF93ZWJob29rIGltcG9ydCBEaXNjb3JkV2ViaG9vaywgRGlzY29yZEVtYmVkDQppbXBvcnQgZGlzY29yZA0KaW1wb3J0IGdldHBhc3MNCmZyb20gZGlzY29yZC5leHQgaW1wb3J0IGNvbW1hbmRzDQpmcm9tIG9zIGltcG9ydCBzeXN0ZW0sIG5hbWUNCmltcG9ydCBvcywgdGhyZWFkaW5nLCByZXF1ZXN0cywgc3lzLCBjbG91ZHNjcmFwZXIsIGRhdGV0aW1lLCB0aW1lLCBzb2NrZXQsIHNvY2tzLCBzc2wsIHJhbmRvbSwgaHR0cHgNCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxwYXJzZQ0KZnJvbSByZXF1ZXN0cy5jb29raWVzIGltcG9ydCBSZXF1ZXN0c0Nvb2tpZUphcg0KaW1wb3J0IHVuZGV0ZWN0ZWRfY2hyb21lZHJpdmVyIGFzIHdlYmRyaXZlcg0KZnJvbSBzeXMgaW1wb3J0IHN0ZG91dA0KZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgaW5pdA0KDQpwcm90ID0gKHJhbmRvbS5yYW5kaW50KDIsNCkpDQpzeXMuc3Rkb3V0LndyaXRlKCJceDFiXTI7S0FSTUEgQzIgfCAgT25saW5lIFVzZXIgOiBbe31dIHwgVXNlcm5hbWU6IFtwdXNoeV0gfCBEZXZpY2VzIDogMTY5IHwgRXhwaXJlIDogW1VOTElNSVRFRF0gXHgwNyIuZm9ybWF0IChwcm90KSkNCg0Kb3Muc3lzdGVtKCJjbGVhciIpDQpwcmludCgiIiJcMDMzWzkzbQ0KXDAzM1s5M20NCiDilojilojilojilojiloggICAgICAgICAgICAgICAgICAgICAgICAgIOKWiOKWiOKWiCAgICAgICAgICAgICAgIA0K4paR4paR4paI4paI4paIICAgICAgICAgICAgICAgICAgICAgICAgICDilpHilpHilpEgICAgICAgICAgICAgICAgDQog4paR4paI4paI4paIICAgICAgICAg4paI4paI4paI4paI4paI4paIICAg4paI4paI4paI4paI4paI4paI4paIIOKWiOKWiOKWiOKWiCAg4paI4paI4paI4paI4paI4paI4paI4paIICAgICANCiDilpHilojilojiloggICAgICAgIOKWiOKWiOKWiOKWkeKWkeKWiOKWiOKWiCDilojilojilojilpHilpHilojilojilojilpHilpHilojilojilogg4paR4paR4paI4paI4paI4paR4paR4paI4paI4paIICAgIA0KIOKWkeKWiOKWiOKWiCAgICAgICDilpHilojilojilogg4paR4paI4paI4paI4paR4paI4paI4paIIOKWkeKWiOKWiOKWiCDilpHilojilojiloggIOKWkeKWiOKWiOKWiCDilpHilojilojiloggICAgDQog4paR4paI4paI4paIICAgICAg4paI4paR4paI4paI4paIIOKWkeKWiOKWiOKWiOKWkeKWiOKWiOKWiCDilpHilojilojilogg4paR4paI4paI4paIICDilpHilojilojilogg4paR4paI4paI4paIICAgIA0KIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiCDilpHilpHilojilojilojilojilojilojilogg4paI4paI4paI4paI4paIIOKWiOKWiOKWiOKWiCDilojilojilojilojiloggICANCuKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkSAg4paR4paR4paR4paR4paR4paRICAg4paR4paR4paR4paR4paR4paI4paI4paI4paR4paR4paR4paR4paRIOKWkeKWkeKWkeKWkSDilpHilpHilpHilpHilpEgICAgDQogICAgICAgICAgICAgICAgICAgICAg4paI4paI4paIIOKWkeKWiOKWiOKWiCAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICDilpHilpHilojilojilojilojilojiloggICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICDilpHilpHilpHilpHilpHilpEgIA0KICAgICAgICAgICAgXDAzM1s5M20+PiBcMDMzWzk2bVdlbGNvbWUgS3VybWEgVG9vbHMgTWFkZSBCeSBQdXNoeSBcMDMzWzkzbTw8DQogICAgICAgICAgICBcMDMzWzk3bQ0KICAg4paI4paI4paIDQogIOKWiCAgIOKWiA0KXDAzM1s5N20gIOKWiCAgIOKWiCAgICAgICAgICAgICAgICAgICAgIFwwMzNbOTNtV2FubmEgUmVuYW1lIGl0PyBZb3UgQ2FuIERNDQpcMDMzWzk3beKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCAgICAgICAgICAgICAgIOKWiOKWiCAgXDAzM1s5M21QdXNoeUdhbWVydGFnMjcjNzE2NSBtYWtlIFN1cmUgWW91IEpvaW4NClwwMzNbOTdt4paI4paI4paI4paI4paI4paI4paI4paI4paIICAgICAgICAgICAgICDiloggIOKWiCBcMDMzWzkzbVRvIE91ciBTZXJ2ZXIgaHR0cHM6Ly9kaXNjb3JkLmdnL0hqZ3A2RnpWRUEgXDAzM1s5N20NClwwMzNbOTdt4paI4paI4paIICAg4paI4paI4paIIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCAg4paIICAgICAgDQpcMDMzWzk3beKWiOKWiOKWiOKWiCDilojilojilojilogg4paIIOKWiCAgICAgICAgICDiloggIOKWiA0KXDAzM1s5N23ilojilojilojilojilojilojilojilojiloggICAgICAgICAgICAgICDilojiloggICAgIFwwMzNbMzNtICAgICAgICAgIA0KIiIiKQ0KdXNlcm5hbWUgPSBzdHIoaW5wdXQoIlwwMzNbMzNtW0t1cm1hXSBcMDMzWzkzbVVzZXJuYW1lOlwwMzNbMzdtIikpDQpwYXNzd29yZCA9IHN0cihpbnB1dCgiXDAzM1szM21bS3VybWFdIFwwMzNbOTNtUGFzc3dvcmQ6XDAzM1szN20iKSkNCmlmIHBhc3N3b3JkID09ICJib290ZXIiIGFuZCB1c2VybmFtZSA9PSAicm9vdCI6DQogICAgcHJpbnQgKGYiXDAzM1s5M21Mb2dnZWQgaW4gYXMge3VzZXJuYW1lfSIpDQogICAgdGltZS5zbGVlcCgyKQ0KDQplbHNlOg0KICAgIHByaW50ICgiXDAzM1s5MW1JbmNvcnJlY3QgUGFzc3dvcmQuIFBsZWFzZSB0cnkgYWdhaW4uIikNCiAgICB0aW1lLnNsZWVwKDk5OSkNCg0Kb3Muc3lzdGVtKCJjbHMiKQ0Kb3Muc3lzdGVtKCJjbGVhciIpDQpwcmludCgiIiJcMDMzWzkybQ0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0+ICAgICAgICAgICAgICAgICAgfFtfX19fX118IDEwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tPiAgICAgICAgICAgICAgICAgfFtfX19fX118IDIwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLT4gICAgICAgICAgICAgICAgfFtfX19fX118IDMwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0+ICAgICAgICAgICAgICAgfFtfX19fX118IDQwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0tPiAgICAgICAgICAgICAgfFtfX19fX118IDUwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0tLT4gICAgICAgICAgICAgfFtfX19fX118IDYwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0tLS0+ICAgICAgICAgICAgfFtfX19fX118IDcwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0tLS0tPiAgICAgICAgICAgfFtfX19fX118IDgwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0tLS0tLT4gICAgICAgICAgfFtfX19fX118IDkwJQ0KICAgICAgICAgICAgICAgICAgICB8Wz09PT1vXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfLi0tX118DQogICAgICAgICAgICAgICAgICAgIHxbX19fX19dfA0KICAgICAgICAgICAgICAgICAgICB8X19fX19fOnwNCiIiIikNCnRpbWUuc2xlZXAoMC45KQ0KDQpvcy5zeXN0ZW0oImNscyIpDQpvcy5zeXN0ZW0oImNsZWFyIikNCnByaW50KCIiIg0KICAgICAgICAgICAgICAgICAgICAgX19fX19fXyANCiAgICAgICAgICAgICAgICAgICAgfCBfX18gIG98DQogICAgICAgICAgICAgICAgICAgIHxbXy1fXV8gfA0KICAgICAgICAgICAgICAgICAgICB8W19fX19fXXwNCi0tLS0tLS0tLS0+ICAgICAgICAgfFtfX19fX118IDEwMCUNCiAgICAgICAgICAgICAgICAgICAgfFs9PT09b118IA0KICAgICAgICAgICAgICAgICAgICB8W18uLS1fXXwNCiAgICAgICAgICAgICAgICAgICAgfFtfX19fX118DQogICAgICAgICAgICAgICAgICAgIHxfX19fX186fA0KIiIiKQ0KdGltZS5zbGVlcCgwLjkpDQoNCmRlZiBjb3VudGRvd24odCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICB3aGlsZSBUcnVlOg0KICAgICAgICBpZiAodW50aWwgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgICAgIHN0ZG91dC5mbHVzaCgpDQogICAgICAgICAgICBzdGRvdXQud3JpdGUoIlxyICIrRm9yZS5NQUdFTlRBKyJbKl0iK0ZvcmUuV0hJVEUrIiBBdHRhY2sgc3RhdHVzID0+ICIgKyBzdHIoKHVudGlsIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSkgKyAiIHNlYyBsZWZ0ICIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzdGRvdXQuZmx1c2goKQ0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKCJcciAiK0ZvcmUuTUFHRU5UQSsiWypdIitGb3JlLldISVRFKyIgQXR0YWNrIERvbmUgISAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iKQ0KICAgICAgICAgICAgcmV0dXJuDQoNCiNyZWdpb24gZ2V0DQpkZWYgZ2V0X3RhcmdldCh1cmwpOg0KICAgIHVybCA9IHVybC5yc3RyaXAoKQ0KICAgIHRhcmdldCA9IHt9DQogICAgdGFyZ2V0Wyd1cmknXSA9IHVybHBhcnNlKHVybCkucGF0aA0KICAgIGlmIHRhcmdldFsndXJpJ10gPT0gIiI6DQogICAgICAgIHRhcmdldFsndXJpJ10gPSAiLyINCiAgICB0YXJnZXRbJ2hvc3QnXSA9IHVybHBhcnNlKHVybCkubmV0bG9jDQogICAgdGFyZ2V0WydzY2hlbWUnXSA9IHVybHBhcnNlKHVybCkuc2NoZW1lDQogICAgaWYgIjoiIGluIHVybHBhcnNlKHVybCkubmV0bG9jOg0KICAgICAgICB0YXJnZXRbJ3BvcnQnXSA9IHVybHBhcnNlKHVybCkubmV0bG9jLnNwbGl0KCI6IilbMV0NCiAgICBlbHNlOg0KICAgICAgICB0YXJnZXRbJ3BvcnQnXSA9ICI0NDMiIGlmIHVybHBhcnNlKHVybCkuc2NoZW1lID09ICJodHRwcyIgZWxzZSAiODAiDQogICAgICAgIHBhc3MNCiAgICByZXR1cm4gdGFyZ2V0DQoNCmRlZiBnZXRfcHJveHlsaXN0KHR5cGUpOg0KICAgIGlmIHR5cGUgPT0gIlNPQ0tTNSI6DQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYXBpLnByb3h5c2NyYXBlLmNvbS8/cmVxdWVzdD1kaXNwbGF5cHJveGllcyZwcm94eXR5cGU9c29ja3M1JnRpbWVvdXQ9MTAwMDAmY291bnRyeT1hbGwiKS50ZXh0DQogICAgICAgIHIgKz0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3d3dy5wcm94eS1saXN0LmRvd25sb2FkL2FwaS92MS9nZXQ/dHlwZT1zb2NrczUiKS50ZXh0DQogICAgICAgIG9wZW4oIi4vcmVzb3VyY2VzL3NvY2tzNS50eHQiLCAndycpLndyaXRlKHIpDQogICAgICAgIHIgPSByLnJzdHJpcCgpLnNwbGl0KCdcclxuJykNCiAgICAgICAgcmV0dXJuIHINCiAgICBlbGlmIHR5cGUgPT0gIkhUVFAiOg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2FwaS5wcm94eXNjcmFwZS5jb20vP3JlcXVlc3Q9ZGlzcGxheXByb3hpZXMmcHJveHl0eXBlPWh0dHAmdGltZW91dD0xMDAwMCZjb3VudHJ5PWFsbCIpLnRleHQNCiAgICAgICAgciArPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vd3d3LnByb3h5LWxpc3QuZG93bmxvYWQvYXBpL3YxL2dldD90eXBlPWh0dHAiKS50ZXh0DQogICAgICAgIG9wZW4oIi4vcmVzb3VyY2VzL2h0dHAudHh0IiwgJ3cnKS53cml0ZShyKQ0KICAgICAgICByID0gci5yc3RyaXAoKS5zcGxpdCgnXHJcbicpDQogICAgICAgIHJldHVybiByDQoNCmRlZiBnZXRfcHJveGllcygpOg0KICAgIGdsb2JhbCBwcm94aWVzDQogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKCIuL3Byb3h5LnR4dCIpOg0KICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIgWypdIitGb3JlLldISVRFKyIgWW91IE5lZWQgUHJveHkgRmlsZSAoIC4vcHJveHkudHh0IClcbiIpDQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIHByb3hpZXMgPSBvcGVuKCIuL3Byb3h5LnR4dCIsICdyJykucmVhZCgpLnNwbGl0KCdcbicpDQogICAgcmV0dXJuIFRydWUNCg0KZGVmIGdldF9jb29raWUodXJsKToNCiAgICBnbG9iYWwgdXNlcmFnZW50LCBjb29raWVKQVIsIGNvb2tpZQ0KICAgIG9wdGlvbnMgPSB3ZWJkcml2ZXIuQ2hyb21lT3B0aW9ucygpDQogICAgYXJndW1lbnRzID0gWw0KICAgICctLW5vLXNhbmRib3gnLCAnLS1kaXNhYmxlLXNldHVpZC1zYW5kYm94JywgJy0tZGlzYWJsZS1pbmZvYmFycycsICctLWRpc2FibGUtbG9nZ2luZycsICctLWRpc2FibGUtbG9naW4tYW5pbWF0aW9ucycsDQogICAgJy0tZGlzYWJsZS1ub3RpZmljYXRpb25zJywgJy0tZGlzYWJsZS1ncHUnLCAnLS1oZWFkbGVzcycsICctLWxhbmc9a29fS1InLCAnLS1zdGFydC1tYXhtaXplZCcsDQogICAgJy0tdXNlci1hZ2VudD1Nb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEwXzNfMyBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDMuMy44IChLSFRNTCwgbGlrZSBHZWNrbykgTW9iaWxlLzE0RzYwIE1pY3JvTWVzc2VuZ2VyLzYuNS4xOCBOZXRUeXBlL1dJRkkgTGFuZ3VhZ2UvZW4nIA0KICAgIF0NCiAgICBmb3IgYXJndW1lbnQgaW4gYXJndW1lbnRzOg0KICAgICAgICBvcHRpb25zLmFkZF9hcmd1bWVudChhcmd1bWVudCkNCiAgICBkcml2ZXIgPSB3ZWJkcml2ZXIuQ2hyb21lKG9wdGlvbnM9b3B0aW9ucykNCiAgICBkcml2ZXIuaW1wbGljaXRseV93YWl0KDMpDQogICAgZHJpdmVyLmdldCh1cmwpDQogICAgZm9yIF8gaW4gcmFuZ2UoNjApOg0KICAgICAgICBjb29raWVzID0gZHJpdmVyLmdldF9jb29raWVzKCkNCiAgICAgICAgdHJ5eSA9IDANCiAgICAgICAgZm9yIGkgaW4gY29va2llczoNCiAgICAgICAgICAgIGlmIGlbJ25hbWUnXSA9PSAnY2ZfY2xlYXJhbmNlJzoNCiAgICAgICAgICAgICAgICBjb29raWVKQVIgPSBkcml2ZXIuZ2V0X2Nvb2tpZXMoKVt0cnl5XQ0KICAgICAgICAgICAgICAgIHVzZXJhZ2VudCA9IGRyaXZlci5leGVjdXRlX3NjcmlwdCgicmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQiKQ0KICAgICAgICAgICAgICAgIGNvb2tpZSA9IGYie2Nvb2tpZUpBUlsnbmFtZSddfT17Y29va2llSkFSWyd2YWx1ZSddfSINCiAgICAgICAgICAgICAgICBkcml2ZXIucXVpdCgpDQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgdHJ5eSArPSAxDQogICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgZHJpdmVyLnF1aXQoKQ0KICAgIHJldHVybiBGYWxzZQ0KDQpkZWYgc3Bvb2YodGFyZ2V0KToNCiAgICBhZGRyID0gWzE5MiwgMTY4LCAwLCAxXQ0KICAgIGQgPSAnLicNCiAgICBhZGRyWzBdID0gc3RyKHJhbmRvbS5yYW5kcmFuZ2UoMTEsIDE5NykpDQogICAgYWRkclsxXSA9IHN0cihyYW5kb20ucmFuZHJhbmdlKDAsIDI1NSkpDQogICAgYWRkclsyXSA9IHN0cihyYW5kb20ucmFuZHJhbmdlKDAsIDI1NSkpDQogICAgYWRkclszXSA9IHN0cihyYW5kb20ucmFuZHJhbmdlKDIsIDI1NCkpDQogICAgc3Bvb2ZpcCA9IGFkZHJbMF0gKyBkICsgYWRkclsxXSArIGQgKyBhZGRyWzJdICsgZCArIGFkZHJbM10NCiAgICByZXR1cm4gKA0KICAgICAgICAiWC1Gb3J3YXJkZWQtUHJvdG86IEh0dHBcclxuIg0KICAgICAgICBmIlgtRm9yd2FyZGVkLUhvc3Q6IHt0YXJnZXRbJ2hvc3QnXX0sIDEuMS4xLjFcclxuIg0KICAgICAgICBmIlZpYToge3Nwb29maXB9XHJcbiINCiAgICAgICAgZiJDbGllbnQtSVA6IHtzcG9vZmlwfVxyXG4iDQogICAgICAgIGYnWC1Gb3J3YXJkZWQtRm9yOiB7c3Bvb2ZpcH1cclxuJw0KICAgICAgICBmJ1JlYWwtSVA6IHtzcG9vZmlwfVxyXG4nDQogICAgKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgZ2V0X2luZm9fbDcoKToNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJVUkwgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgIHRhcmdldCA9IGlucHV0KCkNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJUSFJFQUQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgIHRocmVhZCA9IGlucHV0KCkNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJUSU1FKHMpICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgIHQgPSBpbnB1dCgpDQogICAgcmV0dXJuIHRhcmdldCwgdGhyZWFkLCB0DQoNCmRlZiBnZXRfaW5mb19sNCgpOg0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdtIOKAoiAiK0ZvcmUuV0hJVEUrIklQICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIjogIitGb3JlLkxJR0hUR1JFRU5fRVgpDQogICAgdGFyZ2V0ID0gaW5wdXQoKQ0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdtIOKAoiAiK0ZvcmUuV0hJVEUrIlBPUlQgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIjogIitGb3JlLkxJR0hUR1JFRU5fRVgpDQogICAgcG9ydCA9IGlucHV0KCkNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJUSFJFQUQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgIHRocmVhZCA9IGlucHV0KCkNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJUSU1FKHMpICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgIHQgPSBpbnB1dCgpDQogICAgcmV0dXJuIHRhcmdldCwgcG9ydCwgdGhyZWFkLCB0DQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiNyZWdpb24gbGF5ZXI0DQpkZWYgcnVuZmxvb2Rlcihob3N0LCBwb3J0LCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICByYW5kID0gcmFuZG9tLl91cmFuZG9tKDQwOTYpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWZsb29kZXIsIGFyZ3M9KGhvc3QsIHBvcnQsIHJhbmQsIHVudGlsKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIGZsb29kZXIoaG9zdCwgcG9ydCwgcmFuZCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIHNvY2sgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuSVBQUk9UT19JR01QKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzb2NrLnNlbmR0byhyYW5kLCAoaG9zdCwgaW50KHBvcnQpKSkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc29jay5jbG9zZSgpDQogICAgICAgICAgICBwYXNzDQoNCg0KZGVmIHJ1bnNlbmRlcihob3N0LCBwb3J0LCB0aCwgdCwgcGF5bG9hZCk6DQogICAgaWYgcGF5bG9hZCA9PSAiIjoNCiAgICAgICAgcGF5bG9hZCA9IHJhbmRvbS5fdXJhbmRvbSg2MDAwMCkNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgICNwYXlsb2FkID0gUGF5bG9hZHNbbWV0aG9kXQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1zZW5kZXIsIGFyZ3M9KGhvc3QsIHBvcnQsIHVudGlsLCBwYXlsb2FkKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIHNlbmRlcihob3N0LCBwb3J0LCB1bnRpbF9kYXRldGltZSwgcGF5bG9hZCk6DQogICAgc29jayA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX0RHUkFNKQ0KICAgIHNvY2suc2V0c29ja29wdChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX1JFVVNFQUREUiwgMSkNCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc29jay5zZW5kdG8ocGF5bG9hZCwgKGhvc3QsIGludChwb3J0KSkpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHNvY2suY2xvc2UoKQ0KICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gTUVUSE9EDQoNCiNyZWdpb24gSEVBRA0KDQpkZWYgTGF1bmNoKHVybCwgdGgsIHQsIG1ldGhvZCk6ICN0ZXN0aW5nDQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZXhlYygidGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrIittZXRob2QrIiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkiKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCg0KZGVmIExhdW5jaEhFQUQodXJsLCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrSEVBRCwgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tIRUFEKHVybCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXF1ZXN0cy5oZWFkKHVybCkNCiAgICAgICAgICAgIHJlcXVlc3RzLmhlYWQodXJsKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUE9TVA0KZGVmIExhdW5jaFBPU1QodXJsLCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrUE9TVCwgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tQT1NUKHVybCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KHVybCkNCiAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QodXJsKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUkFXDQpkZWYgTGF1bmNoUkFXKHVybCwgdGgsIHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1JBVywgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tSQVcodXJsLCB1bnRpbF9kYXRldGltZSk6DQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJlcXVlc3RzLmdldCh1cmwpDQogICAgICAgICAgICByZXF1ZXN0cy5nZXQodXJsKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUFhSQVcNCmRlZiBMYXVuY2hQWFJBVyh1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWFJBVywgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tQWFJBVyh1cmwsIHVudGlsX2RhdGV0aW1lKToNCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgcHJveHkgPSAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpDQogICAgICAgIHByb3h5ID0gew0KICAgICAgICAgICAgJ2h0dHAnOiBwcm94eSwgICANCiAgICAgICAgICAgICdodHRwcyc6IHByb3h5LA0KICAgICAgICB9DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJlcXVlc3RzLmdldCh1cmwsIHByb3hpZXM9cHJveHkpDQogICAgICAgICAgICByZXF1ZXN0cy5nZXQodXJsLCBwcm94aWVzPXByb3h5KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUFhTT0MNCmRlZiBMYXVuY2hQWFNPQyh1cmwsIHRoLCB0KToNCiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHJlcSA9ICAiR0VUICIgK3RhcmdldFsndXJpJ10gKyAiIEhUVFAvMS4xXHJcbiINCiAgICByZXEgKz0gIkhvc3Q6ICIgKyB0YXJnZXRbJ2hvc3QnXSArICJcclxuIg0KICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iDQogICAgcmVxICs9ICJBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nIg0KICAgIHJlcSArPSAiQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG5cclxuIg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWFNPQywgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja1BYU09DKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6DQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHByb3h5ID0gcmFuZG9tLmNob2ljZShsaXN0KHByb3hpZXMpKS5zcGxpdCgiOiIpDQogICAgICAgICAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6DQogICAgICAgICAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICAgICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgICAgICAgICBzLnNldF9wcm94eShzb2Nrcy5IVFRQLCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQ0KICAgICAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgICAgICAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgICAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLkhUVFAsIHN0cihwcm94eVswXSksIGludChwcm94eVsxXSkpDQogICAgICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICByZXR1cm4NCiNlbmRyZWdpb24NCg0KI3JlZ2lvbiBTT0MNCmRlZiBMYXVuY2hTT0ModXJsLCB0aCwgdCk6DQogICAgdGFyZ2V0ID0gZ2V0X3RhcmdldCh1cmwpDQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiINCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIg0KICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyINCiAgICByZXEgKz0gIkNvbm5lY3Rpb246IEtlZXAtQWxpdmVcclxuXHJcbiINCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrU09DLCBhcmdzPSh0YXJnZXQsIHVudGlsLCByZXEpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrU09DKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6DQogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQ0KICAgIGVsc2U6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KI2VuZHJlZ2lvbg0KDQpkZWYgTGF1bmNoUFBTKHVybCwgdGgsIHQpOg0KICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQ0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1BQUywgYXJncz0odGFyZ2V0LCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tQUFModGFyZ2V0LCB1bnRpbF9kYXRldGltZSk6ICMNCiAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgZWxzZToNCiAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZSgiR0VUIC8gSFRUUC8xLjFcclxuXHJcbiIpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBMYXVuY2hOVUxMKHVybCwgdGgsIHQpOg0KICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQ0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgcmVxID0gICJHRVQgIit0YXJnZXRbJ3VyaSddKyIgSFRUUC8xLjFcclxuSG9zdDogIiArIHRhcmdldFsnaG9zdCddICsgIlxyXG4iDQogICAgcmVxICs9ICJVc2VyLUFnZW50OiBudWxsXHJcbiINCiAgICByZXEgKz0gIlJlZmVycmVyOiBudWxsXHJcbiINCiAgICByZXEgKz0gc3Bvb2YodGFyZ2V0KSArICJcclxuIg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tOVUxMLCBhcmdzPSh0YXJnZXQsIHVudGlsLCByZXEpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrTlVMTCh0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEpOiAjDQogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQ0KICAgIGVsc2U6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgTGF1bmNoU1BPT0YodXJsLCB0aCwgdCk6DQogICAgdGFyZ2V0ID0gZ2V0X3RhcmdldCh1cmwpDQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiINCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIg0KICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyINCiAgICByZXEgKz0gc3Bvb2YodGFyZ2V0KQ0KICAgIHJlcSArPSAiQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG5cclxuIg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tTUE9PRiwgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja1NQT09GKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6ICMNCiAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgZWxzZToNCiAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBMYXVuY2hQWFNQT09GKHVybCwgdGgsIHQsIHByb3h5KToNCiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHJlcSA9ICAiR0VUICIrdGFyZ2V0Wyd1cmknXSsiIEhUVFAvMS4xXHJcbkhvc3Q6ICIgKyB0YXJnZXRbJ2hvc3QnXSArICJcclxuIg0KICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iDQogICAgcmVxICs9ICJBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nIg0KICAgIHJlcSArPSBzcG9vZih0YXJnZXQpDQogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJhbmRvbXByb3h5ID0gcmFuZG9tLmNob2ljZShwcm94eSkNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1BYU1BPT0YsIGFyZ3M9KHRhcmdldCwgdW50aWwsIHJlcSwgcmFuZG9tcHJveHkpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrUFhTUE9PRih0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEsIHByb3h5KTogIw0KICAgIHByb3h5ID0gcHJveHkuc3BsaXQoIjoiKQ0KICAgIHByaW50KHByb3h5KQ0KICAgIHRyeToNCiAgICAgICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICAgICAgI3Muc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLlNPQ0tTNSwgc3RyKHByb3h5WzBdKSwgaW50KHByb3h5WzFdKSkNCiAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgICAgICAjcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICAgICAgcy5zZXRfcHJveHkoc29ja3MuU09DS1M1LCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQ0KICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICBleGNlcHQ6DQogICAgICAgIHJldHVybg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQojcmVnaW9uIENGQg0KZGVmIExhdW5jaENGQih1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHNjcmFwZXIgPSBjbG91ZHNjcmFwZXIuY3JlYXRlX3NjcmFwZXIoKQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRkIsIGFyZ3M9KHVybCwgdW50aWwsIHNjcmFwZXIpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrQ0ZCKHVybCwgdW50aWxfZGF0ZXRpbWUsIHNjcmFwZXIpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmwsIHRpbWVvdXQ9MTUpDQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmwsIHRpbWVvdXQ9MTUpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCiNlbmRyZWdpb24NCg0KI3JlZ2lvbiBQWENGQg0KZGVmIExhdW5jaFBYQ0ZCKHVybCwgdGgsIHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgc2NyYXBlciA9IGNsb3Vkc2NyYXBlci5jcmVhdGVfc2NyYXBlcigpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1BYQ0ZCLCBhcmdzPSh1cmwsIHVudGlsLCBzY3JhcGVyKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja1BYQ0ZCKHVybCwgdW50aWxfZGF0ZXRpbWUsIHNjcmFwZXIpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwcm94eSA9IHsNCiAgICAgICAgICAgICAgICAgICAgJ2h0dHAnOiAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpLCAgIA0KICAgICAgICAgICAgICAgICAgICAnaHR0cHMnOiAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsLCBwcm94aWVzPXByb3h5KQ0KICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsLCBwcm94aWVzPXByb3h5KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gQ0ZQUk8NCmRlZiBMYXVuY2hDRlBSTyh1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICBzY3JhcGVyID0gY2xvdWRzY3JhcGVyLmNyZWF0ZV9zY3JhcGVyKHNlc3M9c2Vzc2lvbikNCiAgICBqYXIgPSBSZXF1ZXN0c0Nvb2tpZUphcigpDQogICAgamFyLnNldChjb29raWVKQVJbJ25hbWUnXSwgY29va2llSkFSWyd2YWx1ZSddKQ0KICAgIHNjcmFwZXIuY29va2llcyA9IGphcg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRlBSTywgYXJncz0odXJsLCB1bnRpbCwgc2NyYXBlcikpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tDRlBSTyh1cmwsIHVudGlsX2RhdGV0aW1lLCBzY3JhcGVyKToNCiAgICBoZWFkZXJzID0gew0KICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEwXzNfMyBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDMuMy44IChLSFRNTCwgbGlrZSBHZWNrbykgTW9iaWxlLzE0RzYwIE1pY3JvTWVzc2VuZ2VyLzYuNS4xOCBOZXRUeXBlL1dJRkkgTGFuZ3VhZ2UvZW4nLA0KICAgICAgICAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAndHItVFIsdHI7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLA0KICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2RlZmxhdGUsIGd6aXA7cT0xLjAsICo7cT0wLjUnLA0KICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsDQogICAgICAgICdQcmFnbWEnOiAnbm8tY2FjaGUnLA0KICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywNCiAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsDQogICAgICAgICdTZWMtRmV0Y2gtRGVzdCc6ICdkb2N1bWVudCcsDQogICAgICAgICdTZWMtRmV0Y2gtTW9kZSc6ICduYXZpZ2F0ZScsDQogICAgICAgICdTZWMtRmV0Y2gtU2l0ZSc6ICdzYW1lLW9yaWdpbicsDQogICAgICAgICdTZWMtRmV0Y2gtVXNlcic6ICc/MScsDQogICAgICAgICdURSc6ICd0cmFpbGVycycsDQogICAgfQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGFsbG93X3JlZGlyZWN0cz1GYWxzZSkNCiAgICAgICAgICAgIHNjcmFwZXIuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgYWxsb3dfcmVkaXJlY3RzPUZhbHNlKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gQ0ZTT0MNCmRlZiBMYXVuY2hDRlNPQyh1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQ0KICAgIHJlcSA9ICAnR0VUICcrIHRhcmdldFsndXJpJ10gKycgSFRUUC8xLjFcclxuJw0KICAgIHJlcSArPSAnSG9zdDogJyArIHRhcmdldFsnaG9zdCddICsgJ1xyXG4nDQogICAgcmVxICs9ICdBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nDQogICAgcmVxICs9ICdBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyXHJcbicNCiAgICByZXEgKz0gJ0FjY2VwdC1MYW5ndWFnZToga28sa28tS1I7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjdcclxuJw0KICAgIHJlcSArPSAnQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wXHJcbicNCiAgICByZXEgKz0gJ0Nvb2tpZTogJyArIGNvb2tpZSArICdcclxuJw0KICAgIHJlcSArPSBmJ3NlYy1jaC11YTogIkNocm9taXVtIjt2PSIxMDAiLCAiR29vZ2xlIENocm9tZSI7dj0iMTAwIlxyXG4nDQogICAgcmVxICs9ICdzZWMtY2gtdWEtbW9iaWxlOiA/MFxyXG4nDQogICAgcmVxICs9ICdzZWMtY2gtdWEtcGxhdGZvcm06ICJXaW5kb3dzIlxyXG4nDQogICAgcmVxICs9ICdzZWMtZmV0Y2gtZGVzdDogZW1wdHlcclxuJw0KICAgIHJlcSArPSAnc2VjLWZldGNoLW1vZGU6IGNvcnNcclxuJw0KICAgIHJlcSArPSAnc2VjLWZldGNoLXNpdGU6IHNhbWUtb3JpZ2luXHJcbicNCiAgICByZXEgKz0gJ0Nvbm5lY3Rpb246IEtlZXAtQWxpdmVcclxuJw0KICAgIHJlcSArPSAnVXNlci1BZ2VudDogJyArIHVzZXJhZ2VudCArICdcclxuXHJcblxyXG4nDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja0NGU09DLGFyZ3M9KHVudGlsLCB0YXJnZXQsIHJlcSwpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0OiAgDQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tDRlNPQyh1bnRpbF9kYXRldGltZSwgdGFyZ2V0LCByZXEpOg0KICAgIGlmIHRhcmdldFsnc2NoZW1lJ10gPT0gJ2h0dHBzJzoNCiAgICAgICAgcGFja2V0ID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHBhY2tldC5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBwYWNrZXQuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgICAgIHBhY2tldCA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocGFja2V0LCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgZWxzZToNCiAgICAgICAgcGFja2V0ID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHBhY2tldC5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBwYWNrZXQuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwKToNCiAgICAgICAgICAgICAgICBwYWNrZXQuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhY2tldC5jbG9zZSgpDQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gdGVzdHpvbmUNCmRlZiBhdHRhY2tTS1kodXJsLCB0aW1lciwgdGhyZWFkcyk6DQogICAgZm9yIGkgaW4gcmFuZ2UoaW50KHRocmVhZHMpKToNCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9TGF1bmNoU0tZLCBhcmdzPSh1cmwsIHRpbWVyKSkuc3RhcnQoKQ0KDQpkZWYgTGF1bmNoU0tZKHVybCwgdGltZXIpOg0KICAgIHByb3h5ID0gcmFuZG9tLmNob2ljZShwcm94aWVzKS5zdHJpcCgpLnNwbGl0KCI6IikNCiAgICB0aW1lbG9sID0gdGltZS50aW1lKCkgKyBpbnQodGltZXIpDQogICAgcmVxID0gICJHRVQgLyBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdXJscGFyc2UodXJsKS5uZXRsb2MgKyAiXHJcbiINCiAgICByZXEgKz0gIkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlXHJcbiINCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIg0KICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyINCiAgICByZXEgKz0gIlNlYy1GZXRjaC1TaXRlOiBzYW1lLW9yaWdpblxyXG4iDQogICAgcmVxICs9ICJTZWMtR1BDOiAxXHJcbiINCiAgICByZXEgKz0gIlNlYy1GZXRjaC1Nb2RlOiBuYXZpZ2F0ZVxyXG4iDQogICAgcmVxICs9ICJTZWMtRmV0Y2gtRGVzdDogZG9jdW1lbnRcclxuIg0KICAgIHJlcSArPSAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMVxyXG4iDQogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iDQogICAgd2hpbGUgdGltZS50aW1lKCkgPCB0aW1lbG9sOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgICAgICBzLmNvbm5lY3QoKHN0cih1cmxwYXJzZSh1cmwpLm5ldGxvYyksIGludCg0NDMpKSkNCiAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLlNPQ0tTNSwgc3RyKHByb3h5WzBdKSwgaW50KHByb3h5WzFdKSkNCiAgICAgICAgICAgIGN0eCA9IHNzbC5TU0xDb250ZXh0KCkNCiAgICAgICAgICAgIHMgPSBjdHgud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXVybHBhcnNlKHVybCkubmV0bG9jKQ0KICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBzLmNsb3NlKCkNCg0KZGVmIGF0dGFja1NURUxMQVIodXJsLCB0aW1lciwgdGhyZWFkcyk6DQogICAgZm9yIGkgaW4gcmFuZ2UoaW50KHRocmVhZHMpKToNCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9TGF1bmNoU1RFTExBUiwgYXJncz0odXJsLCB0aW1lcikpLnN0YXJ0KCkNCg0KZGVmIExhdW5jaFNURUxMQVIodXJsLCB0aW1lcik6DQogICAgdGltZWxvbCA9IHRpbWUudGltZSgpICsgaW50KHRpbWVyKQ0KICAgIHJlcSA9ICAiR0VUIC8gSFRUUC8xLjFcclxuSG9zdDogIiArIHVybHBhcnNlKHVybCkubmV0bG9jICsgIlxyXG4iDQogICAgcmVxICs9ICJDYWNoZS1Db250cm9sOiBuby1jYWNoZVxyXG4iDQogICAgcmVxICs9ICJVc2VyLUFnZW50OiAiICsgcmFuZG9tLmNob2ljZSh1YSkgKyAiXHJcbiINCiAgICByZXEgKz0gIkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XHJcbiciDQogICAgcmVxICs9ICJTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW5cclxuIg0KICAgIHJlcSArPSAiU2VjLUdQQzogMVxyXG4iDQogICAgcmVxICs9ICJTZWMtRmV0Y2gtTW9kZTogbmF2aWdhdGVcclxuIg0KICAgIHJlcSArPSAiU2VjLUZldGNoLURlc3Q6IGRvY3VtZW50XHJcbiINCiAgICByZXEgKz0gIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDFcclxuIg0KICAgIHJlcSArPSAiQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG5cclxuIg0KICAgIHdoaWxlIHRpbWUudGltZSgpIDwgdGltZWxvbDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcyA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX1NUUkVBTSkNCiAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHVybHBhcnNlKHVybCkubmV0bG9jKSwgaW50KDQ0MykpKQ0KICAgICAgICAgICAgY3R4ID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKQ0KICAgICAgICAgICAgcyA9IGN0eC53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dXJscGFyc2UodXJsKS5uZXRsb2MpDQogICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwMCk6DQogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgcy5jbG9zZSgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHMuY2xvc2UoKQ0KI2VuZHJlZ2lvbg0KDQpkZWYgTGF1bmNoSFRUUDIodXJsLCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrSFRUUDIsIGFyZ3M9KHVybCwgdW50aWwpKS5zdGFydCgpDQoNCmRlZiBBdHRhY2tIVFRQMih1cmwsIHVudGlsX2RhdGV0aW1lKToNCiAgICBoZWFkZXJzID0gew0KICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKHVhKSwNCiAgICAgICAgICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywNCiAgICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAndHItVFIsdHI7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLA0KICAgICAgICAgICAgJ0FjY2VwdC1FbmNvZGluZyc6ICdkZWZsYXRlLCBnemlwO3E9MS4wLCAqO3E9MC41JywNCiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJywNCiAgICAgICAgICAgICdQcmFnbWEnOiAnbm8tY2FjaGUnLA0KICAgICAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsDQogICAgICAgICAgICAnVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyc6ICcxJywNCiAgICAgICAgICAgICdTZWMtRmV0Y2gtRGVzdCc6ICdkb2N1bWVudCcsDQogICAgICAgICAgICAnU2VjLUZldGNoLU1vZGUnOiAnbmF2aWdhdGUnLA0KICAgICAgICAgICAgJ1NlYy1GZXRjaC1TaXRlJzogJ3NhbWUtb3JpZ2luJywNCiAgICAgICAgICAgICdTZWMtRmV0Y2gtVXNlcic6ICc/MScsDQogICAgICAgICAgICAnVEUnOiAndHJhaWxlcnMnLA0KICAgICAgICAgICAgfQ0KICAgIGNsaWVudCA9IGh0dHB4LkNsaWVudChodHRwMj1UcnVlKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjbGllbnQuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQ0KICAgICAgICAgICAgY2xpZW50LmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycykNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgTGF1bmNoUFhIVFRQMih1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tIVFRQMiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkNCg0KZGVmIEF0dGFja1BYSFRUUDIodXJsLCB1bnRpbF9kYXRldGltZSk6DQogICAgaGVhZGVycyA9IHsNCiAgICAgICAgICAgICdVc2VyLUFnZW50JzogcmFuZG9tLmNob2ljZSh1YSksDQogICAgICAgICAgICAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogJ3RyLVRSLHRyO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43JywNCiAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZGVmbGF0ZSwgZ3ppcDtxPTEuMCwgKjtxPTAuNScsDQogICAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsDQogICAgICAgICAgICAnUHJhZ21hJzogJ25vLWNhY2hlJywNCiAgICAgICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLA0KICAgICAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsDQogICAgICAgICAgICAnU2VjLUZldGNoLURlc3QnOiAnZG9jdW1lbnQnLA0KICAgICAgICAgICAgJ1NlYy1GZXRjaC1Nb2RlJzogJ25hdmlnYXRlJywNCiAgICAgICAgICAgICdTZWMtRmV0Y2gtU2l0ZSc6ICdzYW1lLW9yaWdpbicsDQogICAgICAgICAgICAnU2VjLUZldGNoLVVzZXInOiAnPzEnLA0KICAgICAgICAgICAgJ1RFJzogJ3RyYWlsZXJzJywNCiAgICAgICAgICAgIH0NCiAgICANCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY2xpZW50ID0gaHR0cHguQ2xpZW50KA0KICAgICAgICAgICAgICAgIGh0dHAyPVRydWUsDQogICAgICAgICAgICAgICAgcHJveGllcz17DQogICAgICAgICAgICAgICAgICAgICdodHRwOi8vJzogJ2h0dHA6Ly8nK3JhbmRvbS5jaG9pY2UocHJveGllcyksDQogICAgICAgICAgICAgICAgICAgICdodHRwczovLyc6ICdodHRwOi8vJytyYW5kb20uY2hvaWNlKHByb3hpZXMpLA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICApDQogICAgICAgICAgICBjbGllbnQuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQ0KICAgICAgICAgICAgY2xpZW50LmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycykNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgdGVzdDEodXJsLCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkNCiAgICByZXEgPSAgJ0dFVCAnKyB0YXJnZXRbJ3VyaSddICsnIEhUVFAvMS4xXHJcbicNCiAgICByZXEgKz0gJ0hvc3Q6ICcgKyB0YXJnZXRbJ2hvc3QnXSArICdcclxuJw0KICAgIHJlcSArPSAnQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJw0KICAgIHJlcSArPSAnQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBiclxyXG4nDQogICAgcmVxICs9ICdBY2NlcHQtTGFuZ3VhZ2U6IGtvLGtvLUtSO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43XHJcbicNCiAgICByZXEgKz0gJ0NhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MFxyXG4nDQogICAgI3JlcSArPSAnQ29va2llOiAnICsgY29va2llICsgJ1xyXG4nDQogICAgcmVxICs9IGYnc2VjLWNoLXVhOiAiQ2hyb21pdW0iO3Y9IjEwMCIsICJHb29nbGUgQ2hyb21lIjt2PSIxMDAiXHJcbicNCiAgICByZXEgKz0gJ3NlYy1jaC11YS1tb2JpbGU6ID8wXHJcbicNCiAgICByZXEgKz0gJ3NlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiXHJcbicNCiAgICByZXEgKz0gJ3NlYy1mZXRjaC1kZXN0OiBlbXB0eVxyXG4nDQogICAgcmVxICs9ICdzZWMtZmV0Y2gtbW9kZTogY29yc1xyXG4nDQogICAgcmVxICs9ICdzZWMtZmV0Y2gtc2l0ZTogc2FtZS1vcmlnaW5cclxuJw0KICAgIHJlcSArPSAnQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG4nDQogICAgcmVxICs9ICdVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEwXzNfMyBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDMuMy44IChLSFRNTCwgbGlrZSBHZWNrbykgTW9iaWxlLzE0RzYwIE1pY3JvTWVzc2VuZ2VyLzYuNS4xOCBOZXRUeXBlL1dJRkkgTGFuZ3VhZ2UvZW5cclxuXHJcblxyXG4nDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXRlc3QyLGFyZ3M9KHVudGlsLCB0YXJnZXQsIHJlcSwpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0OiAgDQogICAgICAgICAgICBwYXNzDQoNCmRlZiB0ZXN0Mih1bnRpbF9kYXRldGltZSwgdGFyZ2V0LCByZXEpOg0KICAgIGlmIHRhcmdldFsnc2NoZW1lJ10gPT0gJ2h0dHBzJzoNCiAgICAgICAgcGFja2V0ID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHBhY2tldC5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBwYWNrZXQuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgICAgIHBhY2tldCA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocGFja2V0LCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgZWxzZToNCiAgICAgICAgcGFja2V0ID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHBhY2tldC5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBwYWNrZXQuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwKToNCiAgICAgICAgICAgICAgICBwYWNrZXQuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhY2tldC5jbG9zZSgpDQogICAgICAgICAgICBwYXNzDQoNCg0KI2VuZHJlZ2lvbg0KDQpkZWYgY2xlYXIoKTogDQogICAgaWYgbmFtZSA9PSAnbnQnOiANCiAgICAgICAgc3lzdGVtKCdjbHMnKQ0KICAgIGVsc2U6IA0KICAgICAgICBzeXN0ZW0oJ2NsZWFyJykNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiBoZWxwKCk6DQogICAgY2xlYXIoKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRXSElURV9FWCAgICsiICDilaYg4pWm4pWU4pWQ4pWX4pWmICDilZTilZDilZcgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICArIiAg4pWg4pWQ4pWj4pWR4pWjIOKVkSAg4pWg4pWQ4pWdICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyIgIOKVqSDilanilZrilZDilZ3ilanilZDilZ3ilakgICAgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIiAgICAgICAg4pWQ4pWQ4pWm4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWm4pWQ4pWQXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJsYXllcjcgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTaG93IExheWVyNyBNZXRob2RzICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsibGF5ZXI0ICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsifCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgU2hvdyBMYXllcjQgTWV0aG9kcyAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInRvb2xzICAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFNob3cgdG9vbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJjcmVkaXQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTaG93IGNyZWRpdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiZXhpdCAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsifCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgRXhpdCBLQVJNQSBERG9TICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVoOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVo1xuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJUSEFOSyAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBUaGFua3MgZm9yIHVzaW5nIEtBUk1BLiAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiWU9V4pmlICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBQbHogc3RhciBwcm9qZWN0IDopICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiZ2l0aHViICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsifCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgZ2l0aHViLmNvbS9kYWhsYWgyNzAva3VybWEgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikNCiAgICBzdGRvdXQud3JpdGUoIlxuIikNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiBjcmVkaXQoKToNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjswOzIzNjsyNTBt4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyJEZXZlbG9wZXIgIitGb3JlLlJFRCsiOiBceDFiWzM4OzI7MDsyNTU7MTg5bVB1c2h5XG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyJVSSBEZXNpZ24gIitGb3JlLlJFRCsiOiBceDFiWzM4OzI7MDsyNTU7MTg5bUl0enNldmVuXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyJNZXRob2RzL1Rvb2xzICIrRm9yZS5SRUQrIjogXHgxYlszODsyOzA7MjU1OzE4OW1QdXNoeSBBbmQgSXR6c2V2ZW5cbiIpDQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MDsyMzY7MjUwbeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikNCiAgICBzdGRvdXQud3JpdGUoIlxuIikgICAgDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgbGF5ZXI3KCk6DQogICAgY2xlYXIoKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRXSElURV9FWCAgICsi4pWmICDilZTilZDilZfilaYg4pWm4pWU4pWQ4pWX4pWm4pWQ4pWXIOKVkOKVkOKVlyAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICsi4pWRICDilaDilZDilaPilZrilabilZ3ilZHilaMg4pWg4pWm4pWdICDilZTilZ0gICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICArIuKVqeKVkOKVneKVqSDilakg4pWpIOKVmuKVkOKVneKVqeKVmuKVkCAg4pWpICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsiICAgICAgICDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilabilZDilZBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJjZmIgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIEJ5cGFzcyBDRiBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsicHhjZmIgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgQ0YgQXR0YWNrIFdpdGggUHJveHkgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikgICAgICAgICAgICAgICAgICANCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImNmcmVxICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgQnlwYXNzIENGIFVBTSwgQ0FQVENIQSwgQkZNIChyZXF1ZXN0KSAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJjZnNvYyAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIEJ5cGFzcyBDRiBVQU0sIENBUFRDSEEsIEJGTSAoc29ja2V0KSAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsicHhza3kgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgR29vZ2xlIFByb2plY3QgU2hpZWxkLCBWc2hpZWxkLCAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N20gICIrRm9yZS5MSUdIVFdISVRFX0VYKyIgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIEREb1MgR3VhcmQgRnJlZSwgQ0YgTm9TZWMgV2l0aCBQcm94eSAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsic2t5ICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTa3kgbWV0aG9kIHdpdGhvdXQgcHJveHkgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImh0dHAyICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgSFRUUCAyLjAgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJweGh0dHAyIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIEhUVFAgMi4wIFJlcXVlc3QgQXR0YWNrIFdpdGggUHJveHkgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiZ2V0ICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBHZXQgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInBvc3QgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgUG9zdCBSZXF1ZXN0IEF0dGFjayAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJoZWFkICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIEhlYWQgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsicHBzICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBPbmx5IEdFVCAvIEhUVFAvMS4xICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICANCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInNwb29mICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgSFRUUCBTcG9vZiBTb2NrZXQgQXR0YWNrICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJweHNwb29mIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIEhUVFAgU3Bvb2YgU29ja2V0IEF0dGFjayBXaXRoIFByb3h5ICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIA0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsic29jICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTb2NrZXQgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInB4cmF3ICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgUHJveHkgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJweHNvYyAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFByb3h5IFNvY2tldCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdXG4iKSANCiAgICBzdGRvdXQud3JpdGUoIlxuIikNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiBsYXllcjQoKToNCiAgICBjbGVhcigpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyLilaYgIOKVlOKVkOKVl+KVpiDilabilZTilZDilZfilabilZDilZcg4pWmIOKVpiAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICsi4pWRICDilaDilZDilaPilZrilabilZ3ilZHilaMg4pWg4pWm4pWdIOKVmuKVkOKVoyAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICsi4pWp4pWQ4pWd4pWpIOKVqSDilakg4pWa4pWQ4pWd4pWp4pWa4pWQICAg4pWpICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsiICAgICAgICDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilabilZDilZBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWp4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWp4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInVkcCAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFVEUCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJ0Y3AgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBUQ1AgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdXG4iKSANCiAgICBzdGRvdXQud3JpdGUoIlxuIikNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiB0b29scygpOg0KICAgIGNsZWFyKCkNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUV0hJVEVfRVggICArIuKVlOKVpuKVl+KVlOKVkOKVl+KVlOKVkOKVl+KVpiAg4pWU4pWQ4pWXICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyIg4pWRIOKVkSDilZHilZEg4pWR4pWRICDilZrilZDilZcgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICArIiDilakg4pWa4pWQ4pWd4pWa4pWQ4pWd4pWp4pWQ4pWd4pWa4pWQ4pWdICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyIgICAgICAgIOKVkOKVkOKVpuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVpuKVkOKVkFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiZ2VvaXAgIitGb3JlLkxJR0hUQ1lBTl9FWCsifCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgR2VvIElQIEFkZHJlc3MgTG9va3VwIitGb3JlLkxJR0hUQ1lBTl9FWCsiICAgICAgICAgICAgICAgICAgICAg4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImRucyAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIENsYXNzaWMgRE5TIExvb2t1cCAgICIrRm9yZS5MSUdIVENZQU5fRVgrIiAgICAgICAgICAgICAgICAgICAgIOKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJzdWJuZXQiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTdWJuZXQgSVAgQWRkcmVzcyBMb29rdXAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgICAgICAgICAgICAgICDilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdXG4iKSANCiAgICBzdGRvdXQud3JpdGUoIlxuIikNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiB0aXRsZSgpOg0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUV0hJVEVfRVggICsi4pWm4pWU4pWQ4pWU4pWQ4pWX4pWm4pWQ4pWX4pWU4pWm4pWX4pWU4pWQ4pWXICAgICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgKyLilaDilanilZfilaDilZDilaPilaDilabilZ3ilZHilZHilZHilaDilZDilaMgICAgICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICArIuKVqSDilanilakg4pWp4pWp4pWa4pWQ4pWpIOKVqeKVqSDilakgICAgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIiAgICAgICAg4pWQ4pWQ4pWm4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWm4pWQ4pWQXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZEgIitGb3JlLkxJR0hUV0hJVEVfRVggICArIiAgICAgICAgV2VsY29tZSBUbyBUaGUgTWFpbiBTY3JlZW4gT2YgS2FybWEgICIrRm9yZS5MSUdIVENZQU5fRVggICsiICAgICAgIOKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZEgIitGb3JlLkxJR0hUV0hJVEVfRVggICArIiAgICAgICAgICBUeXBlIFtoZWxwXSB0byBzZWUgdGhlIENvbW1hbmRzICAgICIrRm9yZS5MSUdIVENZQU5fRVggKyIgICAgICAg4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkSAiK0ZvcmUuTElHSFRXSElURV9FWCAgICsiICAgICAgICAgQ29udGFjdCBEZXYgLSBkYWhsYWgyNzAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCArIiAgICAgICDilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiXG4iKQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KZGVmIGNvbW1hbmQoKToNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5MSUdIVENZQU5fRVgrIuKVlOKVkOKVkOKVkCIrRm9yZS5MSUdIVENZQU5fRVgrIlsiInJvb3QiK0ZvcmUuTElHSFRHUkVFTl9FWCsiQCIrRm9yZS5MSUdIVENZQU5fRVgrIkthcm1hIitGb3JlLkNZQU4rIl0iK0ZvcmUuTElHSFRDWUFOX0VYKyJcbuKVmuKVkOKVkFx4MWJbMzg7MjswOzI1NTsxODltPiAiK0ZvcmUuV0hJVEUpDQogICAgY29tbWFuZCA9IGlucHV0KCkNCiAgICBpZiBjb21tYW5kID09ICJjbHMiIG9yIGNvbW1hbmQgPT0gImNsZWFyIjoNCiAgICAgICAgY2xlYXIoKQ0KICAgICAgICB0aXRsZSgpDQogICAgZWxpZiBjb21tYW5kID09ICJoZWxwIiBvciBjb21tYW5kID09ICI/IjoNCiAgICAgICAgaGVscCgpDQogICAgZWxpZiBjb21tYW5kID09ICJjcmVkaXQiOg0KICAgICAgICBjcmVkaXQoKSAgICAgICAgDQogICAgZWxpZiBjb21tYW5kID09ICJsYXllcjciIG9yIGNvbW1hbmQgPT0gIkxBWUVSNyIgb3IgY29tbWFuZCA9PSAibDciIG9yIGNvbW1hbmQgPT0gIkw3IiBvciBjb21tYW5kID09ICJMYXllcjciOg0KICAgICAgICBsYXllcjcoKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAibGF5ZXI0IiBvciBjb21tYW5kID09ICJMQVlFUjQiIG9yIGNvbW1hbmQgPT0gImw0IiBvciBjb21tYW5kID09ICJMNCIgb3IgY29tbWFuZCA9PSAiTGF5ZXI0IjoNCiAgICAgICAgbGF5ZXI0KCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInRvb2xzIiBvciBjb21tYW5kID09ICJ0b29sIjoNCiAgICAgICAgdG9vbHMoKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAiZXhpdCI6DQogICAgICAgIGV4aXQoKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAidGVzdCI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0ZXN0MSh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZS5zbGVlcCgxMCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gImh0dHAyIiBvciBjb21tYW5kID09ICJIVFRQMiI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaEhUVFAyKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4aHR0cDIiIG9yIGNvbW1hbmQgPT0gIlBYSFRUUDIiOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICAgICAgTGF1bmNoUFhIVFRQMih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAiY2ZiIiBvciBjb21tYW5kID09ICJDRkIiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hDRkIodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAicHhjZmIiIG9yIGNvbW1hbmQgPT0gIlBYQ0ZCIjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYQ0ZCKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJwcHMiIG9yIGNvbW1hbmQgPT0gIlBQUyI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFBQUyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpIA0KICAgIGVsaWYgY29tbWFuZCA9PSAic3Bvb2YiIG9yIGNvbW1hbmQgPT0gIlNQT09GIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoU1BPT0YodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKSANCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4c3Bvb2YiIG9yIGNvbW1hbmQgPT0gIlBYU1BPT0YiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgI3RpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICN0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFBYU1BPT0YodGFyZ2V0LCB0aHJlYWQsIHQsIGdldF9wcm94eWxpc3QoIlNPQ0tTNSIpKQ0KICAgICAgICAjdGltZXIuam9pbigpDQogICAgICAgIHRpbWUuc2xlZXAoMTAwMCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gImdldCIgb3IgY29tbWFuZCA9PSAiR0VUIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoUkFXKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInBvc3QiIG9yIGNvbW1hbmQgPT0gIlBPU1QiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hQT1NUKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gImhlYWQiIG9yIGNvbW1hbmQgPT0gIkhFQUQiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hIRUFEKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4cmF3IiBvciBjb21tYW5kID09ICJQWFJBVyI6DQogICAgICAgIGlmIGdldF9wcm94aWVzKCk6DQogICAgICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hQWFJBVyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAic29jIiBvciBjb21tYW5kID09ICJTT0MiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hTT0ModGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAicHhzb2MiIG9yIGNvbW1hbmQgPT0gIlBYU09DIjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYU09DKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJjZnJlcSIgb3IgY29tbWFuZCA9PSAiQ0ZSRVEiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkJ5cGFzc2luZyBDRi4uLiAoTWF4IDYwcylcbiIpDQogICAgICAgIGlmIGdldF9jb29raWUodGFyZ2V0KToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hDRlBSTyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkZhaWxlZCB0byBieXBhc3MgY2ZcbiIpDQogICAgZWxpZiBjb21tYW5kID09ICJjZnNvYyIgb3IgY29tbWFuZCA9PSAiQ0ZTT0MiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkJ5cGFzc2luZyBDRi4uLiAoTWF4IDYwcylcbiIpDQogICAgICAgIGlmIGdldF9jb29raWUodGFyZ2V0KToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hDRlNPQyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkZhaWxlZCB0byBieXBhc3MgY2ZcbiIpDQogICAgZWxpZiBjb21tYW5kID09ICJweHNreSIgb3IgY29tbWFuZCA9PSAiUFhTS1kiOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1hdHRhY2tTS1ksIGFyZ3M9KHRhcmdldCwgdCwgdGhyZWFkKSkuc3RhcnQoKQ0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAic2t5IiBvciBjb21tYW5kID09ICJTS1kiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9YXR0YWNrU1RFTExBUiwgYXJncz0odGFyZ2V0LCB0LCB0aHJlYWQpKS5zdGFydCgpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJ1ZHAiIG9yIGNvbW1hbmQgPT0gIlVEUCI6DQogICAgICAgIHRhcmdldCwgcG9ydCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDQoKQ0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1ydW5zZW5kZXIsIGFyZ3M9KHRhcmdldCwgcG9ydCwgdCwgdGhyZWFkKSkuc3RhcnQoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAidGNwIiBvciBjb21tYW5kID09ICJUQ1AiOg0KICAgICAgICB0YXJnZXQsIHBvcnQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w0KCkNCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9cnVuZmxvb2RlciwgYXJncz0odGFyZ2V0LCBwb3J0LCB0LCB0aHJlYWQpKS5zdGFydCgpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgICAgIA0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICAgICANCiAgICBlbGlmIGNvbW1hbmQgPT0gInN1Ym5ldCI6DQogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbPl0gIitGb3JlLldISVRFKyJJUCAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgICAgICB0YXJnZXQgPSBpbnB1dCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL3N1Ym5ldGNhbGMvP3E9e3RhcmdldH0iKQ0KICAgICAgICAgICAgcHJpbnQoci50ZXh0KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwcmludCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIEFQSSEnKSAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgIGVsaWYgY29tbWFuZCA9PSAiZG5zIjoNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFs+XSAiK0ZvcmUuV0hJVEUrIklQL0RPTUFJTiAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgICAgICB0YXJnZXQgPSBpbnB1dCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL3JldmVyc2VkbnMvP3E9e3RhcmdldH0iKQ0KICAgICAgICAgICAgcHJpbnQoci50ZXh0KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwcmludCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIEFQSSEnKQ0KICAgICAgICAgICAgDQogICAgZWxpZiBjb21tYW5kID09ICJnZW9pcCI6DQogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbPl0gIitGb3JlLldISVRFKyJJUCAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQ0KICAgICAgICB0YXJnZXQgPSBpbnB1dCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL2dlb2lwLz9xPXt0YXJnZXR9IikNCiAgICAgICAgICAgIHByaW50KHIudGV4dCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcHJpbnQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCB3aGlsZSBzZW5kaW5nIHRoZSByZXF1ZXN0IHRvIHRoZSBBUEkhJykNCiAgICBlbHNlOg0KICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIgWz5dICIrRm9yZS5XSElURSsiVW5rbm93biBjb21tYW5kLiB0eXBlICdoZWxwJyB0byBzZWUgYWxsIGNvbW1hbmRzLlxuIikgIA0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAgIA0KDQpkZWYgZnVuYygpOg0KICAgIHN0ZG91dC53cml0ZShGb3JlLlJFRCsiIFtceDFiWzM4OzI7MDsyNTU7MTg5bUxBWUVSIDciK0ZvcmUuUkVEKyJdXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJjZmIgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJCeXBhc3MgQ0YgYXR0YWNrXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJweGNmYiAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJCeXBhc3MgQ0YgYXR0YWNrIHdpdGggcHJveHlcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrImNmcHJvICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkJ5cGFzcyBDRiBVQU0sIENGIENBUFRDSEEsIENGIEJGTSwgQ0YgSlMgKHJlcXVlc3QpXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJjZnNvYyAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJCeXBhc3MgQ0YgVUFNLCBDRiBDQVBUQ0hBLCBDRiBCRk0sIENGIEpTIChzb2NrZXQpXG4iKQ0KIyAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsic2t5ICAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiSFRUUFMgRmxvb2QgYW5kIGJ5cGFzcyBmb3IgQ0YgTm9TZWMsIEREb1MgR3VhcmQgRnJlZSBhbmQgdlNoaWVsZFxuIikNCiMgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInN0ZWxsYXIgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkhUVFBTIFNreSBtZXRob2Qgd2l0aG91dCBwcm94aWVzXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJyYXcgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJSZXF1ZXN0IGF0dGFja1xuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsicG9zdCAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiUG9zdCBSZXF1ZXN0IGF0dGFja1xuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiaGVhZCAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiSGVhZCBSZXF1ZXN0IGF0dGFja1xuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsic29jICAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiU29ja2V0IGF0dGFja1xuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsicHhyYXcgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiUHJveHkgUmVxdWVzdCBhdHRhY2tcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInB4c29jICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlByb3h5IFNvY2tldCBhdHRhY2tcbiIpDQogICAgDQogICAgI3N0ZG91dC53cml0ZShGb3JlLlJFRCsiIFxuWyIrRm9yZS5XSElURSsiTEFZRVIgNCIrRm9yZS5SRUQrIl1cbiIpDQogICAgI3N0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJ0Y3AgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJTdHJvbmcgVENQIGF0dGFjayAobm90IHN1cHBvcnRlZClcbiIpDQogICAgI3N0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJ1ZHAgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJTdHJvbmcgVURQIGF0dGFjayAobm90IHN1cHBvcnRlZClcbiIpDQoNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5SRUQrIiBcbltceDFiWzM4OzI7MDsyNTU7MTg5bVRPT0xTIitGb3JlLlJFRCsiXVxuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiZG5zICAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiQ2xhc3NpYyBETlMgTG9va3VwXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJnZW9pcCAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJHZW8gSVAgQWRkcmVzcyBMb29rdXBcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInN1Ym5ldCAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlN1Ym5ldCBJUCBBZGRyZXNzIExvb2t1cFxuIikNCiAgICANCiAgICBzdGRvdXQud3JpdGUoRm9yZS5SRUQrIiBcbltceDFiWzM4OzI7MDsyNTU7MTg5bU9USEVSIitGb3JlLlJFRCsiXVxuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiY2xlYXIvY2xzICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiQ2xlYXIgY29uc29sZVxuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiZXhpdCAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiQnllLi5cbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrImNyZWRpdCAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlRoYW5rcyBmb3JcbiIpDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgaW5pdChjb252ZXJ0PVRydWUpDQogICAgaWYgbGVuKHN5cy5hcmd2KSA8IDI6DQogICAgICAgIHVhID0gb3BlbignLi9yZXNvdXJjZXMvdWEudHh0JywgJ3InKS5yZWFkKCkuc3BsaXQoJ1xuJykNCiAgICAgICAgY2xlYXIoKQ0KICAgICAgICB0aXRsZSgpDQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBjb21tYW5kKCkNCiAgICBlbGlmIGxlbihzeXMuYXJndikgPT0gNToNCiAgICAgICAgcGFzcw0KICAgIGVsc2U6DQogICAgICAgIHN0ZG91dC53cml0ZSgiTWV0aG9kOiBjZmIsIHB4Y2ZiLCBjZnJlcSwgY2Zzb2MsIHB4c2t5LCBza3ksIGh0dHAyLCBweGh0dHAyLCBnZXQsIHBvc3QsIGhlYWQsIHNvYywgcHhyYXcsIHB4c29jXG4iKQ0KICAgICAgICBzdGRvdXQud3JpdGUoZiJ1c2FnZTp+IyBweXRob24zIHtzeXMuYXJndlswXX0gPG1ldGhvZD4gPHRhcmdldD4gPHRocmVhZD4gPHRpbWU+XG4iKQ0KICAgICAgICBzeXMuZXhpdCgpDQogICAgdWEgPSBvcGVuKCcuL3Jlc291cmNlcy91YS50eHQnLCAncicpLnJlYWQoKS5zcGxpdCgnXG4nKQ0KICAgIG1ldGhvZCA9IHN5cy5hcmd2WzFdLnJzdHJpcCgpDQogICAgdGFyZ2V0ID0gc3lzLmFyZ3ZbMl0ucnN0cmlwKCkNCiAgICB0aHJlYWQgPSBzeXMuYXJndlszXS5yc3RyaXAoKQ0KICAgIHQgICAgICA9IHN5cy5hcmd2WzRdLnJzdHJpcCgpDQogICAgaWYgbWV0aG9kID09ICJjZmIiOg0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaENGQih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInB4Y2ZiIjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hQWENGQih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgbWV0aG9kID09ICJnZXQiOg0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFJBVyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInBvc3QiOg0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFBPU1QodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgbWV0aG9kID09ICJoZWFkIjoNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hIRUFEKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAicHhyYXciOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYUkFXKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInNvYyI6DQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoU09DKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAicHhzb2MiOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYU09DKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gImNmcmVxIjoNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkJ5cGFzc2luZyBDRi4uLiAoTWF4IDYwcylcbiIpDQogICAgICAgIGlmIGdldF9jb29raWUodGFyZ2V0KToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hDRlBSTyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkZhaWxlZCB0byBieXBhc3MgY2ZcbiIpDQogICAgZWxpZiBtZXRob2QgPT0gImNmc29jIjoNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkJ5cGFzc2luZyBDRi4uLiAoTWF4IDYwcylcbiIpDQogICAgICAgIGlmIGdldF9jb29raWUodGFyZ2V0KToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hDRlNPQyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkZhaWxlZCB0byBieXBhc3MgY2ZcbiIpDQogICAgZWxpZiBtZXRob2QgPT0gImh0dHAyIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoSFRUUDIodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgbWV0aG9kID09ICJweGh0dHAyIjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYSFRUUDIodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAicHhza3kiOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1hdHRhY2tTS1ksIGFyZ3M9KHRhcmdldCwgdCwgdGhyZWFkKSkuc3RhcnQoKQ0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgbWV0aG9kID09ICJza3kiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9YXR0YWNrU1RFTExBUiwgYXJncz0odGFyZ2V0LCB0LCB0aHJlYWQpKS5zdGFydCgpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxzZToNCiAgICAgICAgc3Rkb3V0LndyaXRlKCJObyBtZXRob2QgZm91bmQuXG5NZXRob2Q6IGNmYiwgcHhjZmIsIGNmcmVxLCBjZnNvYywgcHhza3ksIHNreSwgaHR0cDIsIHB4aHR0cDIsIGdldCwgcG9zdCwgaGVhZCwgc29jLCBweHJhdywgcHhzb2NcbiIpDQo='))
